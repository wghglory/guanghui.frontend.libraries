<!DOCTYPE HTML>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>妙味课堂-www.miaov.com</title>
    <style>
        body,ul,ol{margin:0;padding:0;}
        li{ list-style:none;}
        img{ border:none; vertical-align:top; }

        #box{width:470px;height:150px; position:relative; margin:500px auto 0; overflow:-hidden;}
        ul{ width:470px; position:absolute;left:0; top:0; z-index:1;}
        ul li{width:470px;}
        ol{z-index:2; width:120px; position:absolute;right:10px; bottom:10px;}
        ol li{ width:20px;height:20px; float:left;margin:0 2px; background:#fff; color:#f60; line-height:20px; text-align:center;}
        ol .active{ background:#f60; color:#fff;}
    </style>
    <script type="text/javascript" src="move.js"></script>
    <script>
    window.onload = function() {
        var oUl = document.getElementsByTagName('ul')[0];
        var aLiUl = oUl.getElementsByTagName('li');

        var oOl = document.getElementsByTagName('ol')[0];
        var aLiOl = oOl.getElementsByTagName('li');

        var oneHeight = aLiUl[0].offsetHeight;


        oUl.style.top = -oneHeight * (aLiUl.length - 1) + 'px'; //当现实最后一张图时
        aLiOl[aLiOl.length - 1].className = 'active';

        //把第一张图拉到ul下方, 不能用absolute，因为会脱离文档流，使得ul高度不再是一张图片高度*5，而是一张图片*4
        aLiUl[0].style.position = 'relative';
        aLiUl[0].style.top = oneHeight * (aLiUl.length - 1) + 'px';
        // 以上时刻刚好第一张图片再次显示，此时最后一张图压在第一张图片下方。我们需要把其余图片拉回跟着第一张图

        // 所以取消第一张图片的定位
        setTimeout(function() {
            aLiUl[0].style.position = 'static';
            console.log(1);
        }, 1000);

        //然后让ul回归到top 0
        setTimeout(function() {
            oUl.style.top = 0;
            console.log(2);
        }, 2000);

        // 两个timer同时执行
    };
    </script>
</head>

<body>
    <div id="box">
        <ul>
            <li><img src="images/1.jpg" alt="" /></li>
            <li><img src="images/2.jpg" alt="" /></li>
            <li><img src="images/3.jpg" alt="" /></li>
            <li><img src="images/4.jpg" alt="" /></li>
            <li><img src="images/5.jpg" alt="" /></li>
        </ul>
        <ol>
            <li>1</li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
            <li>5</li>
        </ol>
    </div>
</body>

</html>
