<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>无标题文档</title>
    <style>
    * {
        margin: 0;
        padding: 0;
    }
    
    li {
        list-style: none;
    }
    
    #div1 {
        width: 785px;
        height: auto;
        margin: 20px auto;
        position: relative;
    }
    
    li {
        position: absolute;
    }
    </style>
    <script src="new_ajax.js"></script>
    <script>
    window.onload = function() {

        var aLi = document.getElementsByTagName('li');
        var aHeight = {
            L: [],
            C: [],
            R: []
        };

        for (var i = 0; i < aLi.length; i++) {
            var iNow = i % 3;

            switch (iNow) {
                case 0:
                    aLi[i].style.left = '5px';
                    aHeight.L.push(aLi[i].offsetHeight);

                    var step = Math.floor(i / 3);

                    if (!step) { //first row
                        aLi[i].style.top = 0;
                    } else {
                        var sum = 0;
                        for (var j = 0; j < step; j++) {
                            sum += aHeight.L[j] + 5;
                        }
                        aLi[i].style.top = sum + 'px';
                    }

                    break;
                case 1:
                    aLi[i].style.left = '240px';
                    aHeight.C.push(aLi[i].offsetHeight);

                    var step = Math.floor(i / 3);

                    if (!step) {
                        aLi[i].style.top = 0;
                    } else {
                        var sum = 0;
                        for (var j = 0; j < step; j++) {
                            sum += aHeight.C[j] + 5;
                        }
                        aLi[i].style.top = sum + 'px';
                    }
                    break;
                case 2:
                    aLi[i].style.left = '475px';
                    aHeight.R.push(aLi[i].offsetHeight);

                    var step = Math.floor(i / 3);

                    if (!step) {
                        aLi[i].style.top = 0;
                    } else {
                        var sum = 0;
                        for (var j = 0; j < step; j++) {
                            sum += aHeight.R[j] + 5;
                        }
                        aLi[i].style.top = sum + 'px';
                    }
                    break;
            }
        }

    };
    </script>
</head>

<body>
    <div id="div1">
        <ul>
            <li>
                <img src="img/1.jpg" />
                <p>111111111</p>
            </li>
            <li>
                <img src="img/2.jpg" />
                <p>222</p>
            </li>
            <li>
                <img src="img/3.jpg" />
                <p>3333</p>
            </li>
            <li>
                <img src="img/4.jpg" />
                <p>4444</p>
            </li>
            <li>
                <img src="img/5.jpg" />
                <p>5555</p>
            </li>
            <li>
                <img src="img/6.jpg" />
                <p>6666</p>
            </li>
            <li>
                <img src="img/7.jpg" />
                <p>777</p>
            </li>
            <li>
                <img src="img/8.jpg" />
                <p>888</p>
            </li>
            <li>
                <img src="img/9.jpg" />
                <p>9999</p>
            </li>
            <li>
                <img src="img/9.jpg" />
                <p>999</p>
            </li>
        </ul>
    </div>
</body>

</html>
