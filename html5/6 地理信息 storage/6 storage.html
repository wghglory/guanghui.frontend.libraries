<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>storage事件</title>
    <script>
        window.onload = function() {
            var aInput = document.getElementsByTagName('input');

            aInput[0].onclick = function() {

                window.localStorage.setItem('name', aInput[3].value);

            };

            aInput[1].onclick = function() {

                alert(window.localStorage.getItem('name'));

            };

            aInput[2].onclick = function() {

                // window.localStorage.removeItem('name');
                // window.localStorage.clear();

            };

            window.addEventListener('storage', function(ev) { //当前页面的事件不会触发, 新的页面改变storage时，会在之前老页面触发

                console.log(ev.key);
                console.log(ev.newValue);
                console.log(ev.oldValue);
                console.log(ev.storageArea);
                console.log(ev.url);

            }, false);

        };
    </script>
</head>

<body>
    <input type="button" value="设置" />
    <input type="button" value="获取" />
    <input type="button" value="删除" />
    <input type="text" />
</body>

</html>
