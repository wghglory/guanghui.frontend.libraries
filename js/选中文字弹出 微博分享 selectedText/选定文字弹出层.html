<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title></title>
    <style>
        div {
            width: 400px;
            margin: 50px;
        }

        #demo {
            width: 300px;
            height: 100px;
            padding: 10px;
            background-color: pink;
            position: absolute;
            top: 0;
            left: 0;
            display: none;
            overflow: hidden;
        }

    </style>
</head>

<body>
    <span id="demo"></span>
    <div id="content">China's golden boy, swimmer Sun Yang has given normal people everywhere a reminder that even world class athletes have moments of ineptitude. Upon winning the 200m freestyle swim in Rio, Yang opted to toss his swimming cap to his swarm of supportive
        fans. A noble and kind gesture, were it not for the slip-of-hand that resulted in the cap fleeing from its owner and launching itself back into the pool.
    </div>
</body>

</html>
<script>
    var div = document.getElementById('content');
    var demo = document.getElementById('demo');

    div.onmouseup = function(event) {
        var event = event || window.event;

        var txt = selectedText(); // 用于存贮文字的变量

        if (txt) {
            //看看有没有选中的文字，没有选中文字为空的，就不应该执行   点击一下鼠标 就是空的
            showBox(event.clientX, event.clientY, txt);
        }
    }
    document.onmousedown = function(event) { // 点击空白处隐藏
        var event = event || window.event;
        var targetId = event.target ? event.target.id : event.srcElement.id;
        if (targetId != 'demo') {
            demo.style.display = 'none';
        }
    };

    function showBox(mousex, mousey, contentText) {
        setTimeout(function() {
            demo.style.display = 'block';
            demo.style.left = mousex + 'px';
            demo.style.top = mousey + 'px';
            demo.innerHTML = contentText;
        }, 200);
    }

    function selectedText() {
        if (window.getSelection) { //标准
            return window.getSelection().toString();
        } else { //ie
            return document.selection.createRange().text;
        }
    }
</script>
